<app-header (userProfileToggle)="toggleComponentVisibility('userMenu',$event)"></app-header>
<div class="home-container">
  <div class="sidenav-controller pointer" (click)="toggleSidenav()" (mouseover)="onMouseOver()"
    (mouseout)="onMouseOut()">
    <span>Workspace-Menü {{ isSidenavVisible ? "schließen" : "öffnen" }}</span>
    <img class="start-conversation" [src]="currentIconSourceMenu" alt="show-menu-icon"
      [class.sidenav-open]="isSidenavVisible" [class.sidenav-close]="!isSidenavVisible" />
  </div>
  <div class="home-content">
    <div [ngClass]="{
        'sidenav-visible': isSidenavVisible,
        'd-none': !isSidenavVisible
      }">
      <app-sidenav [isCreateChannelVisible]="isCreateChannelVisible" (createChannelVisibilityChange)="
          toggleComponentVisibility('createChannel',$event)
        "></app-sidenav>
    </div>
    <div class="router-outlet">
      <router-outlet></router-outlet>
    </div>
  </div>
  <!-- Popup Overlay Create Channel -->
  @if (isCreateChannelVisible) {
  <div class="popup-wrapper" (click)="closePopupOverlay('createChannel')"
    [ngClass]="{ 'visible': isCreateChannelVisible }">
    <div class="popup-content" (click)="preventClose($event)">
      <app-create-new-channel [isCreateChannelVisible]="isCreateChannelVisible" (createChannelVisibilityChange)="
      toggleComponentVisibility('createChannel',$event)
    "></app-create-new-channel>
    </div>
  </div>
  }
  <!-- Popup Overlay User Profile -->
  @if (isUserProfileVisible) {
  <div class="popup-wrapper" (click)="closePopupOverlay('userProfile')"
  [ngClass]="{ 'visible': isUserProfileVisible }">
    <div class="popup-content" (click)="preventClose($event)">
      <app-user-profile [isUserProfileVisible]="isUserProfileVisible" (userProfileVisibilityChange)="
      toggleComponentVisibility('userProfile',$event)
    "></app-user-profile>
    </div>
  </div>
  }
  <!-- Popup Overlay Current User Profile -->
  @if (isCurrentUserProfileVisible) {
  <div class="popup-wrapper current-user-popup" (click)="closePopupOverlay('currentUserProfile')"
  [ngClass]="{ 'visible': isCurrentUserProfileVisible }">
    <div class="popup-content-current-user" (click)="preventClose($event)">
      <app-current-user-profile
      [isCurrentUserProfileVisible]="isCurrentUserProfileVisible" (currentUserProfileVisibilityChange)="
      toggleComponentVisibility('currentUserProfile',$event)
    "></app-current-user-profile>
    </div>
  </div>
  }
  <!-- Popup Overlay User Menu -->
  @if (isUserMenuVisible) {
    <div class="popup-wrapper" (click)="closePopupOverlay('userMenu')"
    [ngClass]="{ 'visible': isUserMenuVisible }">
      <div class="popup-content-current-user" (click)="preventClose($event)">
        <app-user-menu
        [isUserMenuVisible]="isUserMenuVisible"
        [isCurrentUserProfileVisible]="isCurrentUserProfileVisible"
        (userMenuVisibilityChange)="toggleComponentVisibility('userMenu',$event)"
        (currentUserProfileVisibilityChange)="toggleComponentVisibility('currentUserProfile', $event)"
        ></app-user-menu>
      </div>
    </div>
    }
</div>