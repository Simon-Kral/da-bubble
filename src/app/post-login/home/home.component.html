<!--Header app-->
@if (!this.communicationService.isMobileViewActive) {
<app-header (userProfileToggle)="toggleComponentVisibility('userMenu', $event)"></app-header>
}
<!--mobile Header app-->
@if (this.communicationService.isMobileViewActive) {
<app-mobile-header></app-mobile-header>
}
<div class="home-wrapper"
[ngClass]="{ 'padding-unset': this.communicationService.isMobileViewActive}">
	<!-- Sidenav Controller -->
	@if (!this.communicationService.isMobileViewActive) {
	<div class="sidenav-controller pointer" (click)="this.communicationService.toggleSidenav()">
		<span>Workspace-Menü {{ !this.communicationService.isSidenavVisible ? "schließen" : "öffnen" }}</span>
		<img class="start-conversation" src="../../assets/img/icons/menu_black.png" alt="show-menu-icon"
			[class.sidenav-open]="!this.communicationService.isSidenavVisible"
			[class.sidenav-close]="this.communicationService.isSidenavVisible" />
	</div>
	}

	<div class="app-container">
		<!-- SideNav -->
		<div class="sidenav-wrapper" [ngClass]="{
		 'slide-in': !this.communicationService.isSidenavVisible && !this.communicationService.isMobileViewActive, 
		 'slide-out': this.communicationService.isSidenavVisible && !this.communicationService.isMobileViewActive && this.communicationService.isSidenavToggled,
		 'd-none': communicationService.isSidenavAnimationComplete || (this.communicationService.isSidenavVisible && this.communicationService.isMobileViewActive),
		 'full-width': this.communicationService.isMobileViewActive,
		 'padding-unset': this.communicationService.isMobileViewActive
	   }">
			<app-sidenav [isCreateChannelVisible]="isCreateChannelVisible"
				(createChannelVisibilityChange)="toggleComponentVisibility('createChannel', $event)">
			</app-sidenav>
		</div>

		<!--  router-outlet used for channels / prvt-msg & start-new-msg component  -->
		@if (!communicationService.isWelcomeScreenVisible) {
		<div class="app-wrapper" [ngClass]="{
			'absolute': this.communicationService.isMobileViewActive
		}">
			<router-outlet></router-outlet>
		</div>
		}
		<!-- threads -->
		@if (this.communicationService.isThreadVisible) {
		<div class="app-wrapper" [ngClass]="{
			'absolute': this.communicationService.isMobileViewActive
		  }">
			<app-thread></app-thread>
		</div>
		}
		<!-- welcome screen-->
		@if (!this.communicationService.isMobileViewActive && communicationService.isWelcomeScreenVisible) {
		<div class="app-wrapper">
			<app-welcome-screen></app-welcome-screen>
		</div>
		}
	</div>

	<!-- Popup Overlay Create Channel -->
	@if (isCreateChannelVisible) {
	<div class="popup-wrapper" (click)="closePopupOverlay('createChannel')"
		[ngClass]="{ visible: isCreateChannelVisible }">
		<div class="popup-content" (click)="preventClose($event)">
			<app-create-new-channel [isCreateChannelVisible]="isCreateChannelVisible" (createChannelVisibilityChange)="
					toggleComponentVisibility('createChannel', $event)
				"></app-create-new-channel>
		</div>
	</div>
	}
	<!-- Popup Overlay User Profile -->
	@if (isUserProfileVisible) {
	<div class="popup-wrapper" (click)="closePopupOverlay('userProfile')" [ngClass]="{ 'visible': this.isUserProfileVisible }">
		<div class="popup-content" (click)="preventClose($event)">
			<app-user-profile [isUserProfileVisible]="isUserProfileVisible" (userProfileVisibilityChange)="
					toggleComponentVisibility('userProfile', $event)
				"></app-user-profile>
		</div>
	</div>
	}
	<!-- Popup Overlay Current User Profile -->
	@if (this.isCurrentUserProfileVisible) {
	<div class="popup-wrapper current-user-popup" (click)="closePopupOverlay('currentUserProfile')"
		[ngClass]="{ 'visible': this.isCurrentUserProfileVisible }">
		<div class="popup-content-user-profile" (click)="preventClose($event)">
			<app-current-user-profile [isCurrentUserProfileVisible]="isCurrentUserProfileVisible"
				(currentUserProfileVisibilityChange)="
					toggleComponentVisibility('currentUserProfile', $event)
				"></app-current-user-profile>
		</div>
	</div>
	}
	<!-- Popup Overlay User Menu -->
	@if (this.isUserMenuVisible) {
	<div class="popup-wrapper" (click)="closePopupOverlay('userMenu')" [ngClass]="{ 'visible': isUserMenuVisible }">
		<div class="popup-content-user-profile" (click)="preventClose($event)">
			<app-user-menu [isUserMenuVisible]="isUserMenuVisible" (userMenuVisibilityChange)="
					toggleComponentVisibility('userMenu', $event)
				"></app-user-menu>
		</div>
	</div>
	}

	<!-- Popup Overlay Channel Details -->
	@if (this.isChannelDetailsVisible) {
	<div class="popup-wrapper" (click)="closePopupOverlay('channelDetails')"
		[ngClass]="{ visible: isChannelDetailsVisible }">
		<div class="popup-channel-details" (click)="preventClose($event)">
			<app-channel-details [isChannelDetailsVisible]="isChannelDetailsVisible" (isChannelDetailsVisibleChange)="
					toggleComponentVisibility('channelDetails', $event)
				"></app-channel-details>
		</div>
	</div>
	}

	<!-- Popup Overlay Add Members To Channel -->
	@if (this.isAddMembersToChannelVisible) {
	<div class="popup-wrapper" (click)="closePopupOverlay('addMembersToChannel')"
		[ngClass]="{ visible: isAddMembersToChannelVisible }">
		<div class="popup-content" (click)="preventClose($event)">
			<app-add-members-to-channel [isAddMembersToChannelVisible]="isAddMembersToChannelVisible"
				(addMembersToChannelVisibilityChange)="
					toggleComponentVisibility('addMembersToChannel', $event)
				"></app-add-members-to-channel>
		</div>
	</div>
	}
	<!-- Popup Overlay Channel Members -->
	@if (this.isChannelMemberVisible) {
	<div class="popup-wrapper" (click)="closePopupOverlay('channelMember')"
		[ngClass]="{ visible: isChannelMemberVisible }">
		<div class="popup-content popup-channel-members" (click)="preventClose($event)">
			<app-channel-member [isChannelMemberVisible]="isChannelMemberVisible" (channelMemberVisibilityChange)="
						toggleComponentVisibility('channelMember', $event)
					"></app-channel-member>
		</div>
	</div>
	}



	<!-- Popup Overlay mobile User menu -->
	@if (this.communicationService.isMobileViewActive && this.communicationService.isMobileUserMenuVisible) {
	<div class="mobile-popup-wrapper" (click)="this.communicationService.closeMobileMenuPopupOverlay('mobileUserMenu')"
		[ngClass]="{ visible: this.communicationService.isMobileUserMenuVisible }">
		<div class="mobile-user-menu-content" (click)="preventClose($event)">
			<app-mobile-user-menu></app-mobile-user-menu>
		</div>
	</div>
	}
</div>